<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui" xmlns:o="http://omnifaces.org/ui">
<h:head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>Usuário</title>
	<h:outputStylesheet library="css" name="dashboard.css" />
	<h:outputStylesheet>	
	.ui-paginator.ui-paginator-top {	display: none;	}	
	.ui-paginator.ui-paginator-top {
		 background-color: white;
		 border: 1px solid #fff;
	}
  	.ui-datatable thead th {
	 	border: 1px solid #fff;
	 }  	
  	.ui-datatable-tablewrapper {
  	    overflow: hidden; 
  	}
  	.ui-state-default {
  		background-color: white;
  		background: white;  		
	}	
	.ui-datatable table {
    	border-collapse: collapse;
    	width: 100%;
    }
	table {
   		border-collapse: separate;
    	border-spacing: 2px;
	}
	.ui-datatable table thead {
		border-bottom:1px solid rgb(147, 184, 189);
		border-top: 2px solid white;
		border-left: 2px solid white;
		border-right: 2px solid white;
	}
	</h:outputStylesheet>	
</h:head>
<h:body style="overflow-y:hidden;">
	<div id="nav" >	
		<div align="center" >			
				<p:commandButton actionListener="#{usuarioController.btnDlgNovoContato(autenticadorController.usuario)}" icon="fa  fa-user" style="cursor: pointer;  
						  background: tomato;	 
						  border: 1px solid #fff;   
						  margin-bottom: 10px;
						  color:white;  
						  text-shadow: 0 1px 1px #333;	 
						  -webkit-border-radius: 5px;
						  border-radius: 5px;	 
						  transition: all 0.2s linear;" />		
				<p:commandButton action="#{autenticadorController.logout}" icon="fa  fa-sign-out" style="cursor: pointer;  
						  background: tomato;	 
						  border: 1px solid #fff;   
						  margin-bottom: 10px;
						  color:white;  
						  text-shadow: 0 1px 1px #333;	 
						  -webkit-border-radius: 5px;
						  border-radius: 5px;	 
						  transition: all 0.2s linear;"/>		
		</div>
	</div>
	<div id="conteudo">	
	<div id="avatar">			
		<div class="ui-g-12" align="center">
			<div class="ui-g-12" >
				<p:graphicImage value="/resources/images/user_avatar.png"	 styleClass="avatarimg"		/>
			</div>
			<div class="ui-g-12">
				<h:outputText value="#{autenticadorController.login}"	/>
			</div>
			<div class="ui-g-12" >
				<p:commandButton actionListener="#{usuarioController.btnDlgEditar(autenticadorController.usuario)}" icon="fa fa-pencil-square-o" />	
				</div>
			</div>			
	</div>
	

		<h:form id="formInserir">

			<p:growl id="growl" />
			<p:autoUpdate />

			<p:dialog id="dlgInserir" widgetVar="dlgInserir" modal="true"
				header="Novo Usuário">

				<p:panelGrid id="panelInserir" columns="2">
					<p:outputLabel value="Nome" />
					<p:inputText value="#{usuarioController.usuario.nome}" />
					<p:outputLabel value="Fone" />
					<p:inputMask id="fone" value="#{usuarioController.usuario.fone}"
						mask="(99)9999-9999" />
					<p:commandButton value="salvar"
						actionListener="#{usuarioController.inserir}" 
					 />
				</p:panelGrid>

			</p:dialog>


		</h:form>

		<h:form id="formEditar">
			<p:dialog id="dlgEditar" widgetVar="dlgEditar" modal="true"
				header="Editar">
				<p:column headerText="Nome">
					<h:inputText value="#{usuarioController.usuarioSelecionado.nome}" />
				</p:column>
				<p:column headerText="Fone">
					<p:inputMask id="fone"
						value="#{usuarioController.usuarioSelecionado.fone}"
						mask="(99)9999-9999" required="true" />
				</p:column>
				<p:column>
					<p:commandButton value="salvar"
						actionListener="#{usuarioController.editar}"
						/>
				</p:column>
			</p:dialog>
		</h:form>

		<h:form id="formNovoContato" enctype="multipart/form-data">	
	
			<p:dialog id="dlgNovoContato" widgetVar="dlgNovoContato" modal="true"	header="Novo Contato de #{usuarioController.usuarioSelecionado.nome}">
			<p:panelGrid columns="2"  layout="grid">
				<div class="ui-g">
					<div class="ui-g-6" >					
						<p:graphicImage value="/resources/images/user_null.png"	
								style=" width: 100px;
								height: 100px;
								border: 1px solid rgba(147, 184, 189, 0.8);
								border-radius: 50%;
								 margin-left: 50px;"/>	</div>
								<div class="ui-g-6" >		 
							

						</div>
					
			<div class="ui-g-2">				
					<p:inputText value="#{usuarioController.contato.nome}"	placeholder="Entre com o Nome"	required="true" />
				</div>
				<div class="ui-g-2">
				<p:outputLabel value="Fone" />					
					<p:inputMask id="fone" value="#{usuarioController.contato.fone}" placeholder="Entre com o Fone"	 mask="(99)9999-9999" required="true" />
				</div>
				<div class="ui-g-2">					
					<p:inputText id="email" value="#{usuarioController.contato.email}"	placeholder="Entre com o Email"	required="true" />
				</div>
				<div class="ui-g-2">					
					<p:calendar value="#{usuarioController.contato.dtNasc}"  pattern="dd/MM/yyyy" mask="true" placeholder="Entre com o Data" required="true"  >
						<o:converter converterId="javax.faces.DateTime"  pattern="dd/MM/yyyy" />
					</p:calendar>
				</div>
					<div class="ui-g-2">				
						<p:commandButton value="salvar"	ajax="false" actionListener="#{usuarioController.novoContato}" update="dtbContatos" />
					</div>				
				</div>
				</p:panelGrid>
			</p:dialog>		
				
			<p:dataTable id="dtbContatos" var="contato" widgetVar="" paginator="true"  rows="3"	value="#{usuarioController.obterContotatosPorUsuario(autenticadorController.usuario)}" paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                 rowsPerPageTemplate="3,6,9"> 
				<p:column style="  border: 1px solid rgb(147, 184, 189);">
					<div class="ui-g-3" style="border:0px solid red">
					    <p:graphicImage style="width:100%"  value="#{usuarioController.foto.fileNames}"	/> 					    				
					</div>
					<div class="ui-g-3" style="border:0px solid red">
							<h:outputText value="#{contato.nome}" />
					</div>
					<div class="ui-g-8" style="border:0px solid red">
							<h:outputText value="#{contato.fone}" />
					</div>
					<div class="ui-g-3" style="border:0px solid red">
							<h:outputText value="#{contato.email}" />
					</div>	
					<div class="ui-g-3" style="border:0px solid red">
							<h:outputText value="#{contato.dtNasc}"  >
								<o:converter converterId="javax.faces.DateTime"  pattern="dd/MM/yyyy" />
							</h:outputText>
					</div>					
					<div class="ui-g-3" style="border:0px solid red">						
						<p:commandButton icon="fa  fa-trash" actionListener="#{usuarioController.deleteContato(contato)}" immediate="true" update="dtbContatos" style="cursor: pointer;  
						  background: tomato;	 
						  border: 1px solid #fff;   
						  margin-bottom: 10px;
						  color:white;  
						  text-shadow: 0 1px 1px #333;	 
						  -webkit-border-radius: 5px;
						  border-radius: 5px;	 
						  transition: all 0.2s linear;">
							<p:confirm header="Deletar" message="deseja remover #{contato.nome} ?"/>
						</p:commandButton>
						<p:commandButton  actionListener="#{usuarioController.btnDlgEditarContato(contato)}" immediate="true"  icon="fa  fa-pencil" styleClass="btnNovo" style="cursor: pointer;  
						  background: #FFAD33;	 
						  border: 1px solid #fff;   
						  margin-bottom: 10px;
						  color:white;  
						  text-shadow: 0 1px 1px #333;	 
						  -webkit-border-radius: 5px;
						  border-radius: 5px;	 
						  transition: all 0.2s linear;"/>
					</div>				
				</p:column>				
			</p:dataTable>			
		
		</h:form>
		
			<h:form id="formEditarContato">
			
			<p:dialog id="dlgEditarContato" widgetVar="dlgEditarContato" modal="true" >
					<p:panelGrid columns="2">
			
				<h:outputText value="Nome"  />
					<h:inputText value="#{usuarioController.contato.nome}"
						required="true" />
				
				<h:outputText value="Fone"/>
					<p:inputMask id="fone" value="#{usuarioController.contato.fone}"
						mask="(99)9999-9999" required="true" />
				
				<h:outputText value="Email"/>
					<p:inputText id="email" value="#{usuarioController.contato.email}"
						required="true" />
				<h:outputText value="Nascimento" />
					<p:calendar value="#{usuarioController.contato.dtNasc}"  pattern="dd/MM/yyyy" mask="true" required="true"  >
						<o:converter converterId="javax.faces.DateTime"  pattern="dd/MM/yyyy" />
					</p:calendar>
				<p:column>
					<p:commandButton value="salvar"	actionListener="#{usuarioController.editarContato}" update="formNovoContato:dtbContatos"/>
				</p:column>
				</p:panelGrid>
			
			</p:dialog>
			</h:form>

	</div>

	<p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
		<p:commandButton value="Yes" type="button"
			styleClass="ui-confirmdialog-yes" icon="pi pi-check" />
		<p:commandButton value="No" type="button"
			styleClass="ui-confirmdialog-no" icon="pi pi-times" />
	</p:confirmDialog>

	<p:ajaxStatus  delay="9000"  onstart="PF('statusDialog').show()" onsuccess="PF('statusDialog').hide()" />
             
	<p:dialog widgetVar="statusDialog" modal="true" draggable="false" closable="false" resizable="false" showHeader="false">
    	<p:graphicImage name="/images/ajaxloadingbar.gif"  />
	</p:dialog>
</h:body>
</html>
